<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Profile - Universe Odyssey</title>
  <link rel="stylesheet" href="/css/navbar.css" />
  <link rel="stylesheet" href="/css/site.css" />
  <style>
    .profile-card { max-width:900px; margin:90px auto; padding:24px; border-radius:12px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03); }
    .profile-row { display:flex; gap:18px; align-items:center; }
    .profile-avatar { width:72px; height:72px; border-radius:999px; background:linear-gradient(135deg,#7b61ff,#5a45cc); display:flex; align-items:center; justify-content:center; color:white; font-weight:700; }
    .btn-logout { padding:10px 14px; background:linear-gradient(135deg,#7b61ff,#5a45cc); color:white; border:none; border-radius:8px; cursor:pointer; }
    @media (max-width:640px){ .profile-row{flex-direction:column; align-items:flex-start;} }
  </style>
</head>
<body>
  <nav class="navbar">
    <a href="/" class="navbar-brand">ü™ê Universe Odyssey</a>
    <div class="auth-buttons" id="authButtons"></div>
  </nav>

  <main class="container">
    <div class="profile-card">
      <div id="profileContent">Loading...</div>
    </div>
  </main>

  <script>
    async function loadProfile(){
      try{
        const res = await fetch('/auth/me');
        if(!res.ok) return window.location.href = '/login';
        const data = await res.json();
        if(!data || !data.success) return window.location.href = '/login';
        const u = data.user;
        document.getElementById('profileContent').innerHTML = `
          <div class="profile-row">
            <div class="profile-avatar">${(u.fullName||'U').charAt(0).toUpperCase()}</div>
            <div>
              <h2 style="margin:0">${u.fullName}</h2>
              <div style="color:#c8d3e6">${u.email}</div>
              <div style="color:#9aa6bf; font-size:13px; margin-top:6px">Member since ${new Date(u.createdAt).toLocaleString()}</div>
            </div>
            <div style="margin-left:auto"><button class="btn-logout" id="logoutBtn">Logout</button></div>
          </div>
        `;
        document.getElementById('logoutBtn').addEventListener('click', async ()=>{
          await fetch('/logout', { method: 'POST' });
          window.location.href = '/';
        });
      }catch(e){ console.error(e); window.location.href = '/login'; }
    }
    loadProfile();
  </script>
</body>
</html>
